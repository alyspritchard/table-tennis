(window["webpackJsonptable-tennis"]=window["webpackJsonptable-tennis"]||[]).push([[0],{20:function(e,t,n){e.exports=n(35)},25:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(11),o=n.n(s),c=(n(25),n(2)),l=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container--header title nes-container is-rounded"},r.a.createElement("h1",null,"Table Tennis Tournament")))},i=n(13),u=n(5),m=n(6),h=n(8),d=n(7),p=n(1),f=n(9),y=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={name:"",players:[],nameError:!1,playersError:!1},n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.handleClick=n.handleClick.bind(Object(p.a)(n)),n.handleStart=n.handleStart.bind(Object(p.a)(n)),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.setState({name:e.currentTarget.value,nameError:!1,playersError:!1})}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.state.name.trim();""===t||this.state.players.includes(t)?this.setState({nameError:!0}):this.setState({players:[].concat(Object(i.a)(this.state.players),[t]),name:""})}},{key:"handleStart",value:function(e){e.preventDefault();var t=this.state.players;t.length>=4&&Number.isInteger(Math.log2(t.length))?this.props.handlePlayers(t):this.setState({playersError:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.players,s=t.nameError,o=t.playersError;return r.a.createElement("div",{className:"container"},r.a.createElement("section",{className:"container--message message -right"},r.a.createElement("div",{className:"nes-balloon from-right"},r.a.createElement("p",null,o?"Don't forget what I said! You need a minimum of 4 players. The number of players also needs to be a power of 2! Don't ask me why, maths isn't my strong suit...":s?"I need a valid name please! If the person you're trying to add, shares their name with someone already playing in the tournament, then they'll just have to change it by deed poll I'm afraid.":"Welcome! To create your tournament you'll need a minimum of 4 players, and the total number of players needs to be a power of 2 (i.e. 4, 8, 16, 32 ...)")),r.a.createElement("i",{className:"nes-bcrikko"})),r.a.createElement("div",{className:"container--grid"},r.a.createElement("form",{className:"add nes-container is-rounded"},r.a.createElement("h2",{className:"title--container"},"Add a Player"),r.a.createElement("div",{className:"nes-field is-inline"},r.a.createElement("label",{htmlFor:"playerName"},"Name"),r.a.createElement("input",{onChange:function(t){return e.handleChange(t)},value:n,id:"playerName",type:"text",maxLength:"30",placeholder:"Princess Peach",className:"nes-input ".concat(s?"error":null)})),r.a.createElement("button",{className:"nes-btn is-success",onClick:function(t){return e.handleClick(t)}},"Add 'em")),r.a.createElement("div",{className:"players lists nes-container is-rounded"},r.a.createElement("h2",{className:"title--container"},"Who's Playing?"),r.a.createElement("p",null,"So you don't forget..."),r.a.createElement("ul",{className:"nes-list is-disc"},a.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))),r.a.createElement("div",{className:"container--button"},r.a.createElement("button",{className:"big-btn nes-btn is-success",onClick:this.handleStart},"Start Tournament!")))}}]),t}(a.Component),b=Object(c.b)(null,(function(e){return{handlePlayers:function(t){return e(function(e){return{type:"initiate",players:e=e.map((function(e){return{name:e}}))}}(t))}}}))(y),v=n(12);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={winner:0},n.handlePlayer1=n.handlePlayer1.bind(Object(p.a)(n)),n.handlePlayer2=n.handlePlayer2.bind(Object(p.a)(n)),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handlePlayer1",value:function(){var e=this.props,t=e.match,n=e.roundsPlayed;if(t.round-1===n){var a=O({},t,{p1Score:1,p2Score:0});this.props.handleMatch(a),this.setState({winner:1})}}},{key:"handlePlayer2",value:function(){var e=this.props,t=e.match,n=e.roundsPlayed;if(t.round-1===n){var a=O({},t,{p1Score:0,p2Score:1});this.props.handleMatch(a),this.setState({winner:2})}}},{key:"render",value:function(){var e=this.props,t=e.players,n=e.match,a=this.state.winner,s=t[n.player1],o=t[n.player2],c=n.p1Score>n.p2Score?"warning":1===a?"success":null,l=n.p2Score>n.p1Score?"warning":2===a?"success":null;return r.a.createElement("div",{className:"match"},r.a.createElement("button",{onClick:this.handlePlayer1,className:"nes-btn is-".concat(c)},void 0===s?"?":s.name),r.a.createElement("button",{onClick:this.handlePlayer2,className:"nes-btn is-".concat(l)},void 0===o?"?":o.name))}}]),t}(a.Component),j=Object(c.b)((function(e,t){var n=e.players,a=e.roundsPlayed,r=e.matches,s=t.match,o=t.handleMatch,c=t.submitted;return{players:n,roundsPlayed:a,match:r[s.id],handleMatch:o,submitted:c}}))(E),P=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={matches:[],submitted:!1},n.handleMatches=n.handleMatches.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.handleChampion=n.handleChampion.bind(Object(p.a)(n)),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleMatches",value:function(e){if(this.state.matches.map((function(e){return e.id})).includes(e.id)){var t=this.state.matches.map((function(t){return t.id===e.id?e:t}));this.setState({matches:t})}else this.setState({matches:[].concat(Object(i.a)(this.state.matches),[e])})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.props.round;this.state.submitted||this.state.matches.length!==this.props.matches.filter((function(e){return e.round===n})).length||(this.state.matches.forEach((function(e){return t.props.submitScores(e)})),this.props.endRound(),this.setState({submitted:!0}))}},{key:"handleChampion",value:function(e){e.preventDefault();var t=this.props.round,n=new Audio("https://themushroomkingdom.net/sounds/wav/smb/smb_world_clear.wav");if(!this.state.submitted&&this.state.matches.length===this.props.matches.filter((function(e){return e.round===t})).length){var a=this.state.matches[0];console.log(a),this.props.submitScores(a),this.props.endTournament(a),this.setState({submitted:!0}),n.play()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.round,a=t.totalRounds,s=t.matches;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,n===a?"Final":"Round"+n),s.filter((function(e){return e.round===n})).map((function(t,n){return r.a.createElement(j,{key:n,match:t,handleMatch:e.handleMatches})})),n===a?r.a.createElement("button",{onClick:function(t){return e.handleChampion(t)},className:"nes-btn is-success"},"Confirm"):r.a.createElement("button",{onClick:function(t){return e.handleSubmit(t)},className:"nes-btn is-success"},"Next Round"))}}]),t}(a.Component),S=Object(c.b)((function(e,t){var n=e.matches,a=e.totalRounds;return{round:t.round,matches:n,totalRounds:a}}),(function(e){return{submitScores:function(t){return e(function(e){return{type:"updateRound",match:e}}(t))},endRound:function(){return e({type:"nextRound"})},endTournament:function(t){return e(function(e){return{type:"endTournament",finalMatch:e}}(t))}}}))(P),w=function(e){for(var t=e.totalRounds,n=e.roundsPlayed,a=e.players,s=e.champion,o=e.handleNewTournament,c=[],l=1;l<=t;l+=1)c.push(r.a.createElement(S,{round:l}));var i=-1===s?"":a[s].name,u="Congrats to our champion - ".concat(i,"!! \nHip, hip! Hooray!!"),m="You're currently playing Round ".concat(n+1,". \nClick on players to select them as the winner for their match. Once you're done click 'Next Round' to move on. \nGood luck everyone!");return r.a.createElement("div",{className:"container"},r.a.createElement("section",{className:"container--message message -right"},r.a.createElement("div",{className:"nes-balloon from-right"},r.a.createElement("p",null,t===n?u:n===t-1?"Here it is, the final match! No cheating.":m)),r.a.createElement("i",{onClick:function(){new Audio("https://themushroomkingdom.net/sounds/wav/smb/smb_1-up.wav").play()},className:"nes-bcrikko"})),r.a.createElement("div",{className:"container--grid"},c.map((function(e,t){return r.a.createElement("div",{key:t,className:"round nes-container is-rounded"},e)}))),r.a.createElement("div",{className:"container--button"},r.a.createElement("button",{onClick:o,className:"big-btn nes-btn is-success"},"New Tournament")))},N=Object(c.b)((function(e){return{totalRounds:e.totalRounds,roundsPlayed:e.roundsPlayed,players:e.players,champion:e.champion}}),(function(e){return{handleNewTournament:function(){return e({type:"newTournament"})}}}))(w),k=function(e){var t=e.inPlay;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l,null),t?r.a.createElement(N,null):r.a.createElement(b,null))},C=Object(c.b)((function(e){return{inPlay:e.inPlay}}))(k),R=n(10),T=n(19),M=n.n(T),D={players:[],matches:[],inPlay:!1,roundsPlayed:0,totalRounds:0,champion:-1};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=0,F=function(e){return e.p1Score>e.p2Score?e.player1:e.player2},A=function(e){var t=[];if(0===e.roundsPlayed)t=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(e.players.map((function(e,t){return t})));else{var n=e.matches.filter((function(t){return t.round===e.roundsPlayed}));console.log(n);var a=n.map((function(e){return F(e)}));console.log(a),t=a}console.log(t);var r=e.matches.map((function(n){return n.round===e.roundsPlayed+1?x({},n,{player1:t.shift(),player2:t.shift()}):n}));return x({},e,{matches:r})},H=function(e){return x({},e,{roundsPlayed:e.roundsPlayed+1})},J=function(e,t){switch(t.type){case"initiate":return function(e){return x({},e,{inPlay:!0})}(A(function(e){for(var t=Math.log2(e.players.length),n=[],a=e.players.length/2,r=1;r<=t;r+=1){for(var s=1;s<=a;s+=1)n.push({id:I,round:r,player1:null,player2:null,p1Score:0,p2Score:0}),I+=1;a/=2}return x({},e,{matches:n})}(function(e,t){var n=t.players;return x({},e,{players:n,totalRounds:Math.log2(n.length)})}(e,t))));case"updateRound":return function(e,t){var n=t.match,a=e.matches.map((function(e){return e.id===n.id?x({},e,{p1Score:n.p1Score,p2Score:n.p2Score}):e}));return x({},e,{matches:a})}(e,t);case"nextRound":return A(H(e));case"endTournament":return H(function(e,t){var n=t.finalMatch,a=F(n);return console.log(a),x({},e,{champion:a})}(e,t));case"newTournament":return x({},D);default:return e}},L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.b,W=Object(R.c)(J,D,L(M()()));o.a.render(r.a.createElement(c.a,{store:W},r.a.createElement(C,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.87bb5452.chunk.js.map